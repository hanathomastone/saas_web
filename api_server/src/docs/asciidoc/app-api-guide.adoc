ifndef::snippets[]
:snippets: build/generated-snippets
endif::[]
ifndef::doc[]
:doc: src/docs/asciidoc
endif::[]
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:operation-http-request-title: Example Request
:operation-http-response-title: Example Response
ifndef::snippets-custom[]
:snippets-custom: ../../../src/docs/custom



[[title]]
= DTX APP API 문서

include::common.adoc[]


[[verify]]
== 1. 회원 인증
*회원가입을 위한 회원 인증 API*

*[ 회원 인증 실패 ]*::

- 연락처 일치, 실명 불일치 : `"회원 정보가 일치하지 않아요. 다시 확인해주세요."` (rt : 401)
- 중복된 연락처 : `"이미 사용중인 번호에요. 번호를 다시 확인해 주세요."` (rt : 400)
- 이미 가입된 사용자 : `"이미 가입한 사용자입니다."` (rt : 422)

=== Http
include::{snippets}/login/verify/http-request.adoc[]
=== Request
include::{snippets}/login/verify/request-fields.adoc[]
=== Response
include::{snippets}/login/verify/response-fields.adoc[]
include::{snippets}/login/verify/response-body.adoc[]


[[signUp]]
== 2. 회원가입

*사용자 회원가입 API*

: 회원 인증 API 성공 시 return 된 `patientId` 를 담아서 요청합니다.

*[ 회원가입 실패 ]* ::

- 병원 환자 테이블에 존재하지 않는 사용자 : `"존재하지 않는 회원입니다."` (rt : 416)
- 이미 가입된 사용자 : `"이미 가입한 사용자입니다."` (rt : 422)
- 아이디 중복 : `"이미 사용 중인 아이디입니다."` (rt : 422)
- 서비스 이용 필수 동의 '미동의' : `"필수 항목입니다."` (rt : 400)
- 앱 버전이 낮은 경우 : `"앱 업데이트가 필요합니다."` (rt : 426)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 존재하지 않는 비밀번호 찾기 질문 : `"존재하지 않는 질문입니다."` (rt : 416)
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."` (rt : 406)
- 존재하지 않는 서비스 이용 동의 : `"존재하지 않는 서비스 이용 동의입니다."` (rt : 416)


=== Http
include::{snippets}/login/signUp/http-request.adoc[]
=== Request
include::{snippets}/login/signUp/request-fields.adoc[]
=== Response
include::{snippets}/login/signUp/response-fields.adoc[]
include::{snippets}/login/signUp/response-body.adoc[]

[[loginIdCheck]]
== 3. 아이디 중복 확인
*회원가입 시, 아이디 중복 확인을 위한 API*

*[ 아이디 중복 확인 실패 ]*::

- 이미 존재하는 아이디 : `"이미 사용 중인 아이디입니다."` (rt : 422)

=== Http
include::{snippets}/login/loginIdentifier-check/http-request.adoc[]
=== Request
include::{snippets}/login/loginIdentifier-check/query-parameters.adoc[]
=== Response
include::{snippets}/login/loginIdentifier-check/response-fields.adoc[]
include::{snippets}/login/loginIdentifier-check/response-body.adoc[]


[[userLogin]]
== 4. 사용자 로그인
*사용자 로그인 API*

*[ 로그인 실패 ]*::

- 존재하지 않는 아이디, 비밀번호 불일치 : `"아이디 혹은 비밀번호가 올바르지 않습니다."` (rt : 401)
- 앱 버전이 낮은 경우 : `"앱 업데이트가 필요합니다."` (rt : 426)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."` (rt : 406)

=== Http
include::{snippets}/login/http-request.adoc[]
=== Request
include::{snippets}/login/request-fields.adoc[]
=== Response
include::{snippets}/login/response-fields.adoc[]
include::{snippets}/login/response-body.adoc[]

[[userAutoLogin]]
== 5. 사용자 자동 로그인
*사용자 자동 로그인 API*

*[ 자동 로그인 실패 ]*::

- 앱 버전이 낮은 경우 : `"앱 업데이트가 필요합니다."` (rt : 426)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 사용자 기기 정보 조회 불가능 : `"기기 종류 및 버전 정보가 없거나 잘못되었습니다."` (rt : 406)

=== Http
include::{snippets}/user/auto-login/http-request.adoc[]
=== Request
include::{snippets}/user/auto-login/request-fields.adoc[]
=== Response
include::{snippets}/user/auto-login/response-fields.adoc[]
include::{snippets}/user/auto-login/response-body.adoc[]

[[accessTokenReissue]]
== 6. AccessToken 재발급
*AccessToken 재발급 API*

=== Http
include::{snippets}/login/access-token/http-request.adoc[]
=== Response
include::{snippets}/login/access-token/response-fields.adoc[]
include::{snippets}/login/access-token/response-body.adoc[]

[[userFindPasswordQuestions]]
== 7. 비밀번호 찾기 질문 리스트 조회
*사용자 비밀번호 찾기 질문 리스트 조회 API*

=== Http
include::{snippets}/password/questions/http-request.adoc[]
=== Response
include::{snippets}/password/questions/response-fields.adoc[]
include::{snippets}/password/questions/response-body.adoc[]

[[userFindPassword]]
== 8. 사용자 비밀번호 찾기
*비밀번호 재설정을 위한 아이디와 질문, 답변을 통한 비밀번호 찾기 API*

*[ 비밀번호 찾기 실패 ]*::

- 존재하지 않는 아이디 : `"존재하지 않는 아이디입니다."` (rt : 416)
- 질문 혹은 답변 불일치 : `"질문 혹은 답변이 일치하지 않습니다."` (rt : 401)

=== Http
include::{snippets}/login/find-password/http-request.adoc[]
=== Request
include::{snippets}/login/find-password/request-fields.adoc[]
=== Response
include::{snippets}/login/find-password/response-fields.adoc[]
include::{snippets}/login/find-password/response-body.adoc[]

[[userModifyPassword]]
== 9. 사용자 비밀번호 재설정
*비밀번호 찾기 후 비밀번호 재설정 API*

: 비밀번호 찾기 API 성공 시 return 된 `userId` 를 담아서 요청합니다.

*[ 비밀번호 재설정 실패 ]*::

- 존재하지 않는 사용자 : `"존재하지 않는 회원입니다."` (rt : 416)

=== Http
include::{snippets}/login/password/http-request.adoc[]
=== Request
include::{snippets}/login/password/request-fields.adoc[]
=== Reponse
include::{snippets}/login/password/response-fields.adoc[]
include::{snippets}/login/password/response-body.adoc[]

[[userPasswordVerify]]
== 10. 사용자 비밀번호 확인
*보안정보 수정을 위한 비밀번호 확인 API*

*[ 비밀번호 확인 실패 ]*::

- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 비밀번호 불일치 : `"비밀번호가 일치하지 않습니다."` (rt : 401)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)

=== Http
include::{snippets}/user/password-verify/http-request.adoc[]
=== Request
include::{snippets}/user/password-verify/request-fields.adoc[]
=== Response
include::{snippets}/user/password-verify/response-fields.adoc[]
include::{snippets}/user/password-verify/response-body.adoc[]

[[userInfoModifyPassword]]
== 11. 사용자 보안정보 수정 - 비밀번호 변경
*보안정보 수정 시, 비밀번호 변경 API*

*[ 비밀번호 변경 실패 ]*::

- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)

=== Http
include::{snippets}/user/password/http-request.adoc[]
=== Request
include::{snippets}/user/password/request-fields.adoc[]
=== Response
include::{snippets}/user/password/response-fields.adoc[]
include::{snippets}/user/password/response-body.adoc[]

[[userInfoModifyQnA]]
== 12. 사용자 보안정보 수정 - 질문과 답변 수정
*보안정보 수정 시, 질문과 답변 수정 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 존재하지 않는 비밀번호 찾기 질문 : `"존재하지 않는 질문입니다."` (rt : 416)

=== Http
include::{snippets}/user/qna/http-request.adoc[]
=== Request
include::{snippets}/user/qna/request-fields.adoc[]
=== Response
include::{snippets}/user/qna/response-fields.adoc[]
include::{snippets}/user/qna/response-body.adoc[]

[[userModifyInfo]]
== 13. 사용자 회원정보 수정
*사용자 회원정보 수정 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)

=== Http
include::{snippets}/user/http-request.adoc[]
=== Request
include::{snippets}/user/request-fields.adoc[]
=== Response
include::{snippets}/user/response-fields.adoc[]
include::{snippets}/user/response-body.adoc[]

[[userModifyServiceAgree]]
== 14. 사용자 서비스 동의 여부 수정
*사용자 서비스 동의 여부 수정 API*

[ 서비스 이용 동의 항목 ]::
1. 서비스 이용 약관 (고유 번호 : 1 , 필수)
2. 개인정보 수집 및 이용 (고유 번호 : 2 , 필수)
3. 마케팅 정보 수신 (고유 번호 : 3 , 선택)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 잘못된 서비스 수정인 경우 : `"존재하지 않는 서비스 이용 동의입니다."` (rt : 416)
- '필수' 항목 수정 요청인 경우 : `"필수 항목은 수정할 수 없습니다."` (rt : 400)

=== Http
include::{snippets}/user/service-agreement/http-request.adoc[]
=== Request
include::{snippets}/user/service-agreement/request-fields.adoc[]
=== Response
include::{snippets}/user/service-agreement/response-fields.adoc[]
include::{snippets}/user/service-agreement/response-body.adoc[]

[[userInfo]]
== 15. 사용자 회원정보 조회
*사용자 회원정보 조회 API*

: 미인증 사용자의 경우, ``patientPhoneNumber``가 ``null``로 반환됩니다.

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 서비스 이용동의 조회 불가능 : `"존재하지 않는 서비스 이용 동의입니다."` (rt : 416)
- 환자 조회 불가능 : `"존재하지 않는 환자입니다."` (rt : 416)

=== Http
include::{snippets}/user/info/http-request.adoc[]
=== Response
include::{snippets}/user/info/response-fields.adoc[]
include::{snippets}/user/info/response-body.adoc[]


[[userLogout]]
== 16. 사용자 로그아웃
*사용자 로그아웃 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)

=== Http
include::{snippets}/user/logout/http-request.adoc[]
=== Response
include::{snippets}/user/logout/response-fields.adoc[]
include::{snippets}/user/logout/response-body.adoc[]

[[userDelete]]
== 17. 사용자 회원탈퇴
*사용자 회원탈퇴 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)

=== Http
include::{snippets}/user/revoke/http-request.adoc[]
=== Response
include::{snippets}/user/revoke/response-fields.adoc[]
include::{snippets}/user/revoke/response-body.adoc[]

[[oralCheckPhoto]]
== 18. 구강검진 사진 촬영
*구강검진 사진 촬영 API*

*[ 구강검진 사진 촬영 실패 ]*::

- 분석 상태가 'FAIL'인 경우 : `"구강 촬영 인식에 실패했어요.\n가이드에 맞게 재촬영 부탁드려요."` (rt : 410, 411)

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 분석 결과 저장 실패 : `"구강 촬영 결과 저장에 실패했어요.\n관리자에게 문의해 주세요."` (rt : 400)

=== Http
include::{snippets}/oralCheck/photo/http-request.adoc[]
=== Request
include::{snippets}/oralCheck/photo/request-parts.adoc[]
=== Response
include::{snippets}/oralCheck/photo/response-fields.adoc[]
include::{snippets}/oralCheck/photo/response-body.adoc[]

[[oralCheckResult]]
== 19. 구강검진 결과
*구강검진 결과 API*

: 구강검진 사진 촬영 API 성공 시 return 된 `oralCheckId` 를 담아서 요청합니다.

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 사용자 권한이 아닌 경우 : `"권한이 없는 사용자입니다."` (rt : 401)
- 사용자 조회 불가능 : `"존재하지 않는 사용자입니다."` (rt : 416)
- 존재하지 않는 구강검진 고유 번호 : `"존재하지 않는 구강 검진입니다."` (rt : 416)
- 회원 정보와 구강검진 정보 미일치 : `"회원 정보와 구강 검진 정보가 일치하지 않습니다."` (rt : 400)

=== Http
include::{snippets}/oralCheck/result/http-request.adoc[]
=== Request
include::{snippets}/oralCheck/result/query-parameters.adoc[]
=== Response
include::{snippets}/oralCheck/result/response-fields.adoc[]
include::{snippets}/oralCheck/result/response-body.adoc[]

[[toothBrushing]]
== 20. 양치질 기록
*양치질 기록 API*

=== Http
include::{snippets}/toothBrushing/http-request.adoc[]
=== Response
include::{snippets}/toothBrushing/response-fields.adoc[]
include::{snippets}/toothBrushing/response-body.adoc[]

[[questionnaireTemplate]]
== 21. 문진표 양식 조회
*문진표 양식 조회 API*

: 문진표 이어작성 시 조회 결과 버전과 앱 내에서 작성중인 버전이 맞지 않은 경우 재작성 필요

=== Http
include::{snippets}/questionnaire/template/http-request.adoc[]
=== Response
include::{snippets}/questionnaire/template/response-fields.adoc[]
include::{snippets}/questionnaire/template/response-body.adoc[]

[[questionnaireSubmit]]
== 22. 문진표 제출
*문진표 제출 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 문진표 항목 누락 : `"~번 문항을 입력해 주세요."` (rt : 417)
- 유효하지 않은 값 : `"~번 문항에 ~ 값은 유효하지 않습니다."` (rt : 417)
- 중복 선택 시 동일 값 중복 : `"~번 문항에 ~ 값이 중복으로 존재합니다."` (rt : 417)

=== Http
include::{snippets}/questionnaire/submit/http-request.adoc[]
=== Request
include::{snippets}/questionnaire/submit/request-fields.adoc[]
=== Response
include::{snippets}/questionnaire/submit/response-fields.adoc[]
include::{snippets}/questionnaire/submit/response-body.adoc[]

[[questionnaireResult]]
== 23. 문진표 결과 조회
*문진표 결과 조회 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::

- 유효하지 않은 고유번호 : `"문진표가 존재하지 않습니다."` (rt : 416)

=== Http
include::{snippets}/questionnaire/result/http-request.adoc[]
=== Request
include::{snippets}/questionnaire/result/query-parameters.adoc[]
=== Response
include::{snippets}/questionnaire/result/response-fields.adoc[]
include::{snippets}/questionnaire/result/response-body.adoc[]

[[oralCheck]]
== 24. 구강 상태 조회
*구강 상태 조회 API*

=== Http
include::{snippets}/oralCheck/http-request.adoc[]
=== Response
include::{snippets}/oralCheck/response-fields.adoc[]
include::{snippets}/oralCheck/response-body.adoc[]

[[dashboard]]
== 25. 대시보드 조회
*대시보드 조회 API*

=== Http
include::{snippets}/oralCheck/dashboard/http-request.adoc[]
=== Response
include::{snippets}/oralCheck/dashboard/response-fields.adoc[]
include::{snippets}/oralCheck/dashboard/response-body.adoc[]

[[contents]]
== 26. 콘텐츠 조회
*콘텐츠 조회 API*

: 회원 상태에 따른 맞춤형 콘텐츠 여부는 다음과 같습니다.

[비로그인, 미인증 사용자]::
- 사용자 맞춤 콘텐츠 카테고리가 조회되지 않습니다.
- 전체 > 질병 > 양치 > 예방 > 기타 순

[인증된 사용자]::
- 사용자 맞춤 콘텐츠 카테고리가 조회됩니다.
- 전체 > [사용자 이름]님 맞춤 > 질병 > 양치 > 예방 > 기타 순

=== Http
include::{snippets}/contents/http-request.adoc[]
=== Response
include::{snippets}/contents/response-fields.adoc[]
include::{snippets}/contents/response-body.adoc[]

[[contentsCard]]
== 27. 콘텐츠 카드뉴스 조회
*콘텐츠 카드뉴스 조회 API*

*[ 개발 중 잘못된 Request나 데이터 오류로 인해 발생할 수 있는 경우 ]*::
- 존재하지 않는 콘텐츠의 경우 : `"존재하지 않는 콘텐츠입니다."` (rt : 416)

=== Http
include::{snippets}/contents/card/http-request.adoc[]
=== Request
include::{snippets}/contents/card/query-parameters.adoc[]
=== Response
include::{snippets}/contents/card/response-fields.adoc[]
include::{snippets}/contents/card/response-body.adoc[]

[[serviceAgreement]]
== 28. 약관 조회
*약관 조회 API*

: 테스트 시, 적용되는 링크는 다음과 같습니다.

- *서비스 이용약관 경로* : `덴티하이 관리자 페이지`

- *개인정보 수집 경로* : `덴티로카 관리자 페이지`

- *마케팅 경로* : `덴티엑스 API 문서`

=== Http
include::{snippets}/service-agreement/http-request.adoc[]
=== Response
include::{snippets}/service-agreement/response-fields.adoc[]
include::{snippets}/service-agreement/response-body.adoc[]